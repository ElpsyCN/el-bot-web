(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{162:function(t,e,r){"use strict";e.a=function(t){var e=t.app,r=t.$axios,n=t.store;n.state.auth.sessionKey&&r.onRequest((function(t){n.commit("setLoading",!0),"post"===t.method&&t.data&&(t.data.sessionKey=n.state.auth.sessionKey)})),r.onResponse((function(t){if(n.commit("setLoading",!1),200===t.status&&t.data.code){var r=function(code){var t="";switch(code){case 0:t="正常";break;case 1:t="错误的 auth key";break;case 2:t="指定的 Bot 不存在";break;case 3:t="Session 失效或不存在";break;case 4:t="Session 未认证(未激活)";break;case 5:t="发送消息目标不存在(指定对象不存在)";break;case 6:t="指定文件不存在，出现于发送本地图片";break;case 10:t="无操作权限，指 Bot 没有对应操作的限权";break;case 20:t="Bot 被禁言，指 Bot 当前无法向指定群发送消息";break;case 30:t="消息过长";break;case 400:t="错误的访问，如参数错误等"}return t}(t.data.code);if(r&&(e.$toast.error(r),3===t.data.code)){e.$toast.info("正在自动尝试重新建立连接...");n.dispatch("auth/login",{apiUrl:localStorage.getItem("el-bot-apiUrl"),authKey:localStorage.getItem("el-bot-authKey"),qq:localStorage.getItem("el-bot-qq")})}}}))}},163:function(t,e,r){"use strict";(function(t){var n=r(124),o=r.n(n);e.a=function(e){var r={host:t.env.MAH_HOST||"127.0.0.1",port:parseInt(t.env.MAH_PORT||"")||4859,authKey:t.env.MAH_AUTH_KEY||"el-psy-congroo",enableWebsocket:"true"===t.env.MAH_ENABLE_WEBSOCKET||!0},n=new o.a(r);e.$mirai=n,window.$mirai=n}}).call(this,r(131))},164:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(124);function o(t,e,r){return Object(n.getAvatarById)(t,e,r)||"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg"}},202:function(t,e,r){var content=r(284);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(14).default)("6570a8f6",content,!0,{sourceMap:!1})},233:function(t,e,r){"use strict";r.r(e);var n=r(25);r.d(e,"mdiMenu",(function(){return n.q})),r.d(e,"mdiApps",(function(){return n.d})),r.d(e,"mdiCircleOutline",(function(){return n.j})),r.d(e,"mdiInvertColors",(function(){return n.o})),r.d(e,"mdiChevronLeft",(function(){return n.h})),r.d(e,"mdiChevronRight",(function(){return n.i})),r.d(e,"mdiApi",(function(){return n.c})),r.d(e,"mdiGithub",(function(){return n.l})),r.d(e,"mdiBug",(function(){return n.f})),r.d(e,"mdiConsole",(function(){return n.k})),r.d(e,"mdiAccount",(function(){return n.a})),r.d(e,"mdiAccountMultiple",(function(){return n.b})),r.d(e,"mdiViewDashboard",(function(){return n.r})),r.d(e,"mdiImage",(function(){return n.m})),r.d(e,"mdiImageFilterDrama",(function(){return n.n})),r.d(e,"mdiChartBubble",(function(){return n.g})),r.d(e,"mdiMagnify",(function(){return n.p})),r.d(e,"mdiBook",(function(){return n.e}))},239:function(t,e,r){"use strict";var n=r(164),o={components:{NavDrawer:r(240).default},data:function(){return{title:"El Bot"}},created:function(){this.$axios.setBaseURL(this.$store.state.auth.apiUrl)},methods:{getAvatarById:n.a}},c=r(55),l=r(75),f=r.n(l),d=r(407),m=r(408),v=r(409),h=r(154),y=r(177),w=r(410),x=r(150),k=r(129),$=r(411),_=r(398),I=r(412),S=r(176),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{dark:""}},[r("nav-drawer"),t._v(" "),r("v-app-bar",{attrs:{"clipped-left":"",fixed:"",app:""}},[r("v-app-bar-nav-icon",{on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("toggleDrawer")}}}),t._v(" "),r("v-toolbar-title",{domProps:{textContent:t._s(t.title)}}),t._v(" "),r("v-spacer"),t._v(" "),t.$store.state.auth.qq?r("v-avatar",{staticClass:"mr-3",attrs:{size:"40"}},[r("v-img",{attrs:{src:t.getAvatarById(t.$store.state.auth.qq,"qq",100),title:t.$store.state.auth.qq}})],1):t._e(),t._v(" "),t.$store.state.auth.sessionKey?r("v-btn",{on:{click:function(e){return t.$store.dispatch("auth/logout")}}},[t._v("退出")]):r("v-btn",{attrs:{nuxt:"",to:"/login"}},[t._v("登录")]),t._v(" "),r("v-btn",{staticClass:"ml-2",attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.$vuetify.theme.dark=!t.$vuetify.theme.dark}}},[r("v-icon",[t._v("$mdiInvertColors")])],1),t._v(" "),r("v-progress-linear",{attrs:{active:t.$store.state.loading,indeterminate:"",absolute:"",bottom:""}})],1),t._v(" "),r("v-main",[r("v-container",{attrs:{fluid:""}},[r("nuxt")],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports;f()(component,{VApp:d.a,VAppBar:m.a,VAppBarNavIcon:v.a,VAvatar:h.a,VBtn:y.a,VContainer:w.a,VIcon:x.a,VImg:k.a,VMain:$.a,VProgressLinear:_.a,VSpacer:I.a,VToolbarTitle:S.a})},240:function(t,e,r){"use strict";r.r(e);var n={data:function(){return{items:[{icon:"$mdiApps",title:"欢迎",to:"/"},{icon:"$mdiCircleOutline",title:"开始",to:"/start"},{icon:"$mdiViewDashboard",title:"仪表盘",to:"/dashboard"},{icon:"$mdiConsole",title:"控制台",to:"/console"},{icon:"$mdiChartBubble",title:"关于",to:"/about"}]}},computed:{drawer:{get:function(){return this.$store.state.drawer},set:function(t){this.$store.commit("setDrawer",t)}}}},o=r(55),c=r(75),l=r.n(c),f=r(150),d=r(151),m=r(100),v=r(152),h=r(66),y=r(413),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-navigation-drawer",{attrs:{clipped:"",fixed:"",app:""},scopedSlots:t._u([{key:"append",fn:function(){return[r("div",{staticClass:"pa-2"},[r("span",[t._v("©\n        "),r("a",{staticStyle:{color:"gray","text-decoration":"none"},attrs:{href:"https://github.com/ElpsyCN/el-bot-web",target:"_blank"}},[t._v("ElpsyCN")])])])]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",t._l(t.items,(function(e,i){return r("v-list-item",{key:i,attrs:{to:e.to,router:"",exact:""}},[r("v-list-item-action",[r("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)],1)})),1)],1)}),[],!1,null,null,null);e.default=component.exports;l()(component,{VIcon:f.a,VList:d.a,VListItem:m.a,VListItemAction:v.a,VListItemContent:h.a,VListItemTitle:h.b,VNavigationDrawer:y.a})},254:function(t,e,r){r(255),t.exports=r(256)},274:function(t,e,r){"use strict";r.r(e),e.default=function(t){var e=t.store,r=t.redirect;if(!e.state.auth.verify)return r("/login")}},275:function(t,e,r){"use strict";r.r(e),e.default=function(t){var e=t.store,r=t.redirect;if(e.state.auth.verify)return r("/dashboard")}},283:function(t,e,r){"use strict";r(202)},284:function(t,e,r){var n=r(13)(!1);n.push([t.i,"h1[data-v-495dc2cf]{font-size:20px}",""]),t.exports=n},289:function(t,e,r){var content=r(290);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(14).default)("b783a6e0",content,!0,{sourceMap:!1})},290:function(t,e,r){var n=r(13)(!1);n.push([t.i,"::-webkit-scrollbar{width:6px}::-webkit-scrollbar-thumb{border-radius:3px;background-color:hsla(0,0%,50.2%,.4)}::-webkit-scrollbar-thumb:window-inactive{background-color:hsla(0,0%,50.2%,.2)}::-webkit-scrollbar-thumb:active{background-color:hsla(0,0%,50.2%,.6)}",""]),t.exports=n},384:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return n})),r.d(e,"mutations",(function(){return o})),r.d(e,"actions",(function(){return c}));var n=function(){return{drawer:!1,loading:!1}},o={setDrawer:function(t,e){t.drawer=e},setLoading:function(t,e){t.loading=e}},c={toggleDrawer:function(t){(0,t.commit)("setDrawer",!t.state.drawer)}}},385:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return o})),r.d(e,"mutations",(function(){return c})),r.d(e,"actions",(function(){return l}));var n=r(4),o=(r(36),function(){return{apiUrl:localStorage.getItem("el-bot-apiUrl")||"",authKey:localStorage.getItem("el-bot-authKey")||"",qq:localStorage.getItem("el-bot-qq")||0,sessionKey:localStorage.getItem("el-bot-sessionKey")||"",verify:localStorage.getItem("el-bot-verify")||!1}}),c={setApiUrl:function(t,e){t.apiUrl=e,e?localStorage.setItem("el-bot-apiUrl",e):localStorage.removeItem("el-bot-apiUrl")},setAuthKey:function(t,e){t.authKey=e,e?localStorage.setItem("el-bot-authKey",e):localStorage.removeItem("el-bot-authKey")},setQq:function(t,e){t.qq=e,e?localStorage.setItem("el-bot-qq",e):localStorage.removeItem("el-bot-qq")},setSessionKey:function(t,e){t.sessionKey=e,e?localStorage.setItem("el-bot-sessionKey",e):localStorage.removeItem("el-bot-sessionKey")},setVerify:function(t,e){t.verify=e,e?localStorage.setItem("el-bot-verify",e):localStorage.removeItem("el-bot-verify")}},l={verify:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,o=t.dispatch,c=t.state,r.next=3,e.$axios.$post("/verify",{sessionKey:c.sessionKey,qq:c.qq}).then((function(t){0===t.code?(n("setVerify",!0),e.$toast.success("Session 验证成功")):e.$toast.info("请尝试重新登录")}));case 3:o("user/me",null,{root:!0});case 4:case"end":return r.stop()}}),r)})))()},auth:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=t.commit,l=t.dispatch,o.next=3,r.$axios.$post("/auth",{authKey:e}).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(data){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==data.code){t.next=6;break}return c("setSessionKey",data.session),r.$toast.success("连接成功"),t.next=5,l("verify");case 5:r.$router.push("/dashboard");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return o.stop()}}),o)})))()},login:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.commit,c=t.dispatch,o("setApiUrl",e.apiUrl),o("setAuthKey",e.authKey),o("setQq",e.qq),r.$axios.setBaseURL(e.apiUrl),n.next=7,c("auth",e.authKey);case 7:case"end":return n.stop()}}),n)})))()},release:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,o=t.state,r.next=3,e.$axios.$post("/release",{sessionKey:o.sessionKey,qq:o.qq}).then((function(data){0===data.code&&e.$toast.success("已退出账号")})).catch((function(t){e.$toast.error(t.code+": "+t.rawMessage)}));case 3:n("setSessionKey","");case 4:case"end":return r.stop()}}),r)})))()},logout:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,o=t.dispatch,r.next=3,o("release");case 3:n("setApiUrl",""),n("setAuthKey",""),n("setQq",0),n("setVerify",!1),e.$router.push("/");case 8:case"end":return r.stop()}}),r)})))()}}},386:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return o})),r.d(e,"mutations",(function(){return c})),r.d(e,"actions",(function(){return l}));var n=r(4),o=(r(36),function(){return{list:[]}}),c={setList:function(t,e){t.list=e}},l={get:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,window.$mirai.api.friendList();case 3:data=e.sent,r("setList",data);case 5:case"end":return e.stop()}}),e)})))()}}},387:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return o})),r.d(e,"mutations",(function(){return c})),r.d(e,"actions",(function(){return l}));var n=r(4),o=(r(36),function(){return{list:[]}}),c={setList:function(t,e){t.list=e}},l={get:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,window.$mirai.api.groupList();case 3:data=e.sent,r("setList",data);case 5:case"end":return e.stop()}}),e)})))()}}},388:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return o})),r.d(e,"mutations",(function(){return c})),r.d(e,"actions",(function(){return l}));var n=r(4),o=(r(36),r(6),function(){return{message:"",list:[],target:0,type:"group"}}),c={add:function(t,e){t.list.push(e)},remove:function(t,e){t.list=t.list.filter((function(t){return e!==t.id}))},setMessage:function(t,e){t.message=e},setTarget:function(t,e){t.target=e},setType:function(t,e){t.type=e}},l={sendFriendMessage:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.state,n.next=3,window.$mirai.api.sendFriendMessage(e,o.target);case 3:if(0!==(data=n.sent).code){n.next=7;break}return r.$toast.success("发送成功"),n.abrupt("return",data.messageId);case 7:case"end":return n.stop()}}),n)})))()},sendGroupMessage:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.state,n.next=3,window.$mirai.api.sendGroupMessage(e,o.target);case 3:if(0!==(data=n.sent).code){n.next=7;break}return r.$toast.success("发送成功"),n.abrupt("return",data.messageId);case 7:case"end":return n.stop()}}),n)})))()},send:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,f,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.commit,o=t.dispatch,c=t.rootState,(l=t.state).target){r.next=4;break}return e.$toast.error("请选中你想要发送的群或好友"),r.abrupt("return");case 4:if((f=[]).push({type:"Plain",text:l.message}),d=0,"group"!==l.type){r.next=13;break}return r.next=10,o("sendGroupMessage",f);case 10:d=r.sent,r.next=17;break;case 13:if("friend"!==l.type){r.next=17;break}return r.next=16,o("sendFriendMessage",f);case 16:d=r.sent;case 17:n("add",{id:d,sender:{id:c.auth.qq},target:l.target,type:l.type,messageChain:f}),n("setMessage","");case 19:case"end":return r.stop()}}),r)})))()},recall:function(t,e){var r=this,n=t.commit;this.$axios.$post("/recall",{target:e}).then((function(data){0===data.code&&(r.$toast.success("撤回成功"),n("remove",e))}))}}},389:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return n})),r.d(e,"mutations",(function(){return o})),r.d(e,"actions",(function(){return c}));var n=function(){return{avatar:"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg"}},o={setAvatar:function(t,e){t.avatar=e}},c={me:function(t){var e=t.commit,r=t.rootState;e("setAvatar","https://q1.qlogo.cn/g?b=qq&nk=".concat(r.auth.qq,"&s=40"))}}},390:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return o})),r.d(e,"mutations",(function(){return c})),r.d(e,"actions",(function(){return l}));var n=r(4),o=(r(36),function(){return{urls:[],dialog:!1,uploadInfo:{imageId:"",path:"",url:""}}}),c={setDialog:function(t,dialog){t.dialog=dialog},setUrls:function(t,e){t.urls=e},setUploadInfo:function(t,e){t.uploadInfo=e}},l={send:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.commit,c=t.rootState,l=t.state,o("setUrls",e),n.next=4,r.$axios.$post("/sendImageMessage",{target:c.messages.target,urls:l.urls}).then((function(t){r.$toast.success("图片发送成功"),r.$toast.success(t)}));case 4:case"end":return n.stop()}}),n)})))()},upload:function(t,form){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,o={method:"POST",headers:{post:{"Content-Type":"multipart/form-data"}},data:form,url:"/uploadImage"},r.next=4,e.$axios(o).then((function(t){200===t.status&&(n("setUploadInfo",t.data),n("setDialog",!0))}));case 4:case"end":return r.stop()}}),r)})))()}}},64:function(t,e,r){"use strict";var n={layout:"empty",props:{error:{type:Object,default:null}},data:function(){return{pageNotFound:"404 Not Found",otherError:"An error occurred"}},head:function(){return{title:404===this.error.statusCode?this.pageNotFound:this.otherError}}},o=(r(283),r(55)),c=r(75),l=r.n(c),f=r(407),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{dark:""}},[404===t.error.statusCode?r("h1",[t._v("\n    "+t._s(t.pageNotFound)+"\n  ")]):r("h1",[t._v("\n    "+t._s(t.otherError)+"\n  ")]),t._v(" "),r("NuxtLink",{attrs:{to:"/"}},[t._v(" Home page ")])],1)}),[],!1,null,"495dc2cf",null);e.a=component.exports;l()(component,{VApp:f.a})}},[[254,23,4,24]]]);